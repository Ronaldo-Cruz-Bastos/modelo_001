(function(){}).call(this);var $table=$('#table');var $modal=$('#modalNovo');var $alert=$('#action-alert').hide();$('#modalNovo').removeAttr('tabindex');$(function(){var $result=$('#eventsResult');$('#table').on('click-row.bs.table',function(e,row,$element){}).on('dbl-click-row.bs.table',function(e,row,$element){}).on('load-success.bs.table',function(e,data){}).on('load-error.bs.table',function(e,status){}).on('column-switch.bs.table',function(e,field,checked){}).on('page-change.bs.table',function(e,size,number){}).on('search.bs.table',function(e,text){});$("#modalNovo").on('hidden.bs.modal',function(){var $form=document.getElementById("00m3form");$form.action="index.php?%id%";});});function capitalize(str){return str.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase();});}function crud($action){var $form=document.getElementById("00m3form");$form.action="index.php?%id%";if($action=="c"){$form=document.getElementById("00m3form");$form.action=($form.action).replace("?%id%","");document.getElementsByName("_method")[0].value="POST";showModal("Cadastrar Registro ",null);}if($action=="u"){if($table.bootstrapTable("getSelections").length==0){showAlert("Selecione o registro para editar","danger");return;}if($table.bootstrapTable("getSelections").length>1){showAlert("Selecione apenas um registro para editar","danger");return;}else{var row=$table.bootstrapTable("getSelections")[0];$form=document.getElementById("00m3form");$form.action=($form.action).replace("?%id%","?id="+row.id);document.getElementsByName("_method")[0].value="PUT";showModal("Editar Registro ",$table.bootstrapTable("getSelections")[0]);}}if($action=="d"){if($table.bootstrapTable("getSelections").length<=0){showAlert("Selecione o registro para excluir","danger");return;}else{var row=$table.bootstrapTable("getSelections")[0];var aData=$table.bootstrapTable("getSelections");var $ids="";for(var i=0;i<aData.length;i++){if($ids.length>0){$ids+=",";}else{$ids+="[";}$ids+=aData[i].id;}$ids+="]";bootbox.confirm({message:"Deseja realmente excluir este Registro? Esta ação não poderá ser desfeita!",size:'small',buttons:{confirm:{label:"Sim",className:'btn-success'},cancel:{label:'Nao',className:'btn-danger'}},callback:function(result){if(result){window.location.assign('?delete='+$ids);}}});}}}function showModal(title,row){var x=document.getElementById("modalNovo");var ap=x.getElementsByTagName("input");for(var i=0;i<ap.length;i++){if(ap[i].type=="hidden"){continue;}ap[i].value="";}$('#modalNovo').find('.modal-title').text(title);for(var name in row){$('#modalNovo').find('input[name="'+name+'"]').val(row[name]);$('#modalNovo').find('select[name="'+name+'"]').val(row[name]);$('#modalNovo').find('textarea[name="'+name+'"]').val(row[name]);var myObj=eval("CKEDITOR.instances."+name);if(myObj!==null&&typeof myObj==='object'){myObj.setData(row[name]);}}jQuery.noConflict();$('#modalNovo').modal('show');}function showAlert(title,type){var msg_alert=document.getElementById("crud_alert");msg_alert.className='alert alert-'+type+" alert-dismissible";msg_alert.innerHTML='<i class="glyphicon glyphicon-check"></i> '+title;setTimeout(function(){msg_alert.className="";msg_alert.innerHTML="";},3000);}function evalPHP($eval,$url=""){var xmlhttp=new XMLHttpRequest();xmlhttp.open("GET",$url+"?eval="+$eval,false);xmlhttp.onload=function(){};xmlhttp.send();return JSON.parse(xmlhttp.responseText);}function statusFormatter(value,row){var retorno='<i class="material-icons" style="color: #ffd600;text-align: left;">'+""+'</i>'
if(row.codigo=="01"){retorno='<p class="text-success"><b>Entregue</b></p>';}if(row.codigo=="02"){retorno='<p class="text-info"><b>Verificado</b></p>';}return retorno;}function input2TextArea(elId){var input=document.getElementById(elId);var text=document.createElement('textarea');text.setAttribute('name',input.getAttribute('name'));text.setAttribute('id',input.getAttribute('id'));text.setAttribute('class',input.getAttribute('class'));text.value=input.value;input.parentNode.replaceChild(text,input);}function showFilters(){jQuery.noConflict();$('#modalFilter').modal('show');}function setFilters($filtro){var $filtro="";var ev=evalPHP("lib_showNome( 'tipopro', 'id', '1' ); ");ev=JSON.parse(ev);ev=ev.retorno;if($filtro.length>0){$filtro=$filtro.replace(/'/g,'"');var str_eval="makeSQL( 'SELECT * FROM <?php echo($tabela) ?> WHERE "+$filtro+"', true  ); ";var ev=evalPHP(str_eval);ev=JSON.parse(ev);ev=ev.retorno;$table.bootstrapTable('load',ev);}else{var str_eval="makeSQL( 'SELECT * FROM <?php echo($tabela) ?>', true  ); ";var ev=evalPHP(str_eval);ev=JSON.parse(ev);ev=ev.retorno;$table.bootstrapTable('load',ev);$table.bootstrapTable('filterBy',{});}$('#modalFilter').modal('hide');}(function($){$.fn.trocaClass=function(pFromClass,pToClass){return this.removeClass(pFromClass).addClass(pToClass);};}(jQuery));function readImages(event){var files=event.originalEvent.dataTransfer.files;$.each(files,function(index,file){var fileReader=new FileReader();fileReader.onload=(function(file){return function(event){return readImage(file,event);}})(file);fileReader.readAsDataURL(file);});}